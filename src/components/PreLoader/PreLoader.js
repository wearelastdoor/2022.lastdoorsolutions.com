import * as React from "react";
import { useEffect, useRef } from "react";
import gsap, { Expo, Power3, TimelineMax, Circ } from "gsap";

const PreLoader = () => {
  const loader = useRef();

  useEffect(() => {
    const lastDoorRightTimeline = gsap.timeline({
      defaults: {
        duration: 1,
      },
    });

    const lastDoorLeftTimeline = gsap.timeline({
      defaults: {
        duration: 1,
      },
    });

    lastDoorRightTimeline
      .to("#right-path", {
        clipPath: "inset(0% 0%  0% 89%)",
        delay: 0.5,
        duration: 0.7,
        ease: Power3.easeIn,
      })

      .to("#right-path", {
        clipPath: "inset(0% 0%  0% 0%)",
        ease: Power3.easeOut,
      })
      .to(
        "#door-dot",
        {
          clipPath: "inset(0% 0%  0% 0%)",
          duration: 0.3,
        },
        "-=.4"
      )
      .to("#lastdoor-title", {
        clipPath: "inset(0% 0%  0% 0%)",
        ease: Expo.easeOut,
        duration: 0.7,
      })
      .to("#logo-svg", {
        yPercent: -500,
        ease: Power3.easeIn,
        duration: 1.01,
      })
      .to(
        loader.current,
        {
          clipPath: "inset(0% 0% 100%  0% )",
          duration: 1.5,
          delay: 1,
          ease: Power3.easeOut,
        },
        "-=1"
      );

    lastDoorLeftTimeline
      .to("#left-path", {
        clipPath: "inset(0% 89%  0% 0%)",
        delay: 0.5,
        duration: 0.7,
        ease: Power3.easeIn,
      })

      .to("#left-path", {
        clipPath: "inset(0% 0%  0% 0%)",
        duration: 0.9,
        ease: Power3.easeOut,
      });

    let preLoaderTl = gsap.timeline({ yoyo: true });

    preLoaderTl
      .to(".preloader-path-before", {
        duration: 0.8,
        attr: { d: "M0 502S175 272 500 272s500 230 500 230V0H0Z" },
        ease: "power2.in",
      })
      .to(".preloader-path-before", {
        duration: 0.8,
        attr: { d: "M0 2S175 1 500 1s500 1 500 1V0H0Z" },
        ease: "power2.out",
      })
      .to(".preloader-path-before", {
        yPercent: -100,
        duration: 0.6,
      })
      .to(
        ".preloader-path-after",
        {
          duration: 0.8,
          attr: { d: "M0 502S175 272 500 272s500 230 500 230V0H0Z" },
          ease: "power2.in",
          delay: 1.5,
        },
        "-=.6"
      )
      .to(".preloader-path-after", {
        duration: 0.8,
        attr: { d: "M0 2S175 1 500 1s500 1 500 1V0H0Z" },
        ease: "power2.out",
      });
  }, []);

  return (
    <>
      <div id={`c-loader`} className={`c-loader`} key={`c-loader`} ref={loader}>
        <svg
          viewBox="0 0 1000 1000"
          preserveAspectRatio="none"
          className="preloader-path-before-svg"
        >
          <path
            className="preloader-path-before"
            d="M0,1005S175,995,500,995s500,5,500,5V0H0Z"
          />
        </svg>

        <svg
          viewBox="0 0 1000 1000"
          preserveAspectRatio="none"
          className="preloader-path-after-svg"
        >
          <path
            className="preloader-path-after"
            d="M0,1005S175,995,500,995s500,5,500,5V0H0Z"
          />
        </svg>

        <div className={`c-loader__wrap`}>
          <svg
            width="69px"
            height="120px"
            viewBox="0 0 69 120"
            xmlns="http://www.w3.org/2000/svg"
            id="logo-svg"
          >
            <g id="lastdoor-Symbols" stroke="none">
              <g id="lastdoo-logo" fill="#FFFFFF">
                <polygon
                  id={`door-dot`}
                  points="49.4846162 55.8301158 55.9896667 55.8301158 55.9896667 49.3436293 49.4846162 49.3436293"
                ></polygon>
                <path
                  id="right-path"
                  d="M68.9997677,105.173977 L62.4947172,105.173977 L62.4946364,6.486 L13.0096364,6.48648649 L13.0096364,0 L68.9997677,0 L68.9997677,105.173977 Z"
                ></path>
                <path
                  id="left-path"
                  d="M6.50505051,0.000231660232 L6.505,98.6872317 L49.4846162,98.6874903 L49.4846162,105.173977 L0,105.173977 L0,0.000231660232 L6.50505051,0.000231660232 Z M55.989202,105.173977 L68.9997677,105.173977 L68.9997677,98.6874903 L55.989202,98.6874903 L55.989202,105.173977 Z"
                ></path>
                <path
                  d="M18.3476427,111.428571 C19.3325092,111.428571 20.1023648,111.652607 20.6576742,112.101369 C21.2127512,112.550131 21.505631,113.182363 21.5363137,113.998755 L19.8703853,113.998755 C19.8399351,113.60531 19.6832677,113.305675 19.4010803,113.099848 C19.1186605,112.893791 18.7160669,112.790762 18.1930672,112.790762 C17.7388711,112.790762 17.3888099,112.876273 17.1428839,113.047296 C16.8964929,113.218319 16.7735298,113.461946 16.7735298,113.778177 C16.7735298,114.20827 17.2523651,114.530263 18.2102681,114.743235 C18.4699084,114.80224 18.6721349,114.848338 18.8171802,114.881298 C19.4315305,115.032038 19.867596,115.149818 20.1253768,115.234177 C20.3826926,115.318997 20.6070014,115.412806 20.7978381,115.515604 C21.1413908,115.699534 21.3989391,115.943161 21.5707155,116.246485 C21.7424918,116.549809 21.8282637,116.91306 21.8282637,117.336007 C21.8282637,118.181441 21.5323621,118.836952 20.9410238,119.30231 C20.3494531,119.767437 19.5156753,120 18.4394582,120 C17.3783499,120 16.5464318,119.762827 15.9434712,119.28848 C15.3405107,118.814134 15.0160184,118.139262 14.9702269,117.264094 L16.6819468,117.264094 C16.7467988,117.709169 16.935776,118.038999 17.248646,118.254276 C17.561516,118.469322 18.0138527,118.57673 18.6054234,118.57673 C19.1091302,118.57673 19.4887118,118.490527 19.744633,118.31766 C20.0003217,118.144793 20.1279336,117.889411 20.1279336,117.550823 C20.1279336,117.058037 19.3934096,116.650071 17.9241292,116.326465 L17.8725265,116.315401 C17.8344057,116.308256 17.7751324,116.295349 17.6951715,116.27691 C16.9090449,116.111418 16.3479243,115.925644 16.0120423,115.719817 C15.7145136,115.535887 15.4874155,115.288572 15.3309805,114.977873 C15.1745455,114.666943 15.0962117,114.300466 15.0962117,113.877518 C15.0962117,113.08694 15.37468,112.480985 15.9320815,112.060112 C16.4892505,111.639008 17.2944375,111.428571 18.3476427,111.428571 Z M46.7827175,111.439589 C48.0421007,111.439589 49.0448655,111.825428 49.7910117,112.597797 C50.5369255,113.370165 50.910231,114.410593 50.910231,115.719771 C50.910231,117.028949 50.5369255,118.069377 49.7910117,118.841746 C49.0448655,119.613885 48.0421007,119.999954 46.7827175,119.999954 C45.5233342,119.999954 44.522429,119.613885 43.7802344,118.841746 C43.0378072,118.069377 42.6668261,117.028949 42.6668261,115.719771 C42.6668261,114.406905 43.0378072,113.365325 43.7802344,112.595031 C44.522429,111.824736 45.5233342,111.439589 46.7827175,111.439589 Z M56.2913632,111.439589 C57.5507465,111.439589 58.5535112,111.825428 59.2996574,112.597797 C60.0455712,113.370165 60.4188768,114.410593 60.4188768,115.719771 C60.4188768,117.028949 60.0455712,118.069377 59.2996574,118.841746 C58.5535112,119.613885 57.5507465,119.999954 56.2913632,119.999954 C55.03198,119.999954 54.0310748,119.613885 53.2888801,118.841746 C52.546453,118.069377 52.1754719,117.028949 52.1754719,115.719771 C52.1754719,114.406905 52.546453,113.365325 53.2888801,112.595031 C54.0310748,111.824736 55.03198,111.439589 56.2913632,111.439589 Z M1.73449942,111.649103 L1.73449942,118.273821 L5.85039076,118.273821 L5.85039076,119.773844 L0,119.773844 L0,111.649103 L1.73449942,111.649103 Z M11.1917052,111.649103 L14.2316119,119.773844 L12.4108756,119.773844 L11.8388302,118.102568 L8.5699659,118.102568 L8.0148889,119.773844 L6.18857398,119.773844 L9.18826776,111.649103 L11.1917052,111.649103 Z M29.4021128,111.64908 L29.4021128,113.099779 L26.9177481,113.099779 L26.9177481,119.773821 L25.1832486,119.773821 L25.1832486,113.099779 L22.6814506,113.099779 L22.6814506,111.64908 L29.4021128,111.64908 Z M37.554446,111.649011 C38.848231,111.649011 39.8126425,111.985525 40.4481452,112.658323 C41.0834155,113.331351 41.4011669,114.351726 41.4011669,115.719679 C41.4011669,116.462546 41.2837825,117.117135 41.0492462,117.683446 C40.8144774,118.249758 40.4739465,118.705435 40.027421,119.051169 C39.691539,119.308855 39.3098654,119.493247 38.8824004,119.605725 C38.4551677,119.717743 37.8556939,119.773752 37.0849085,119.773752 L34.2514124,119.773752 L34.2514124,111.649011 L37.554446,111.649011 Z M66.1376808,111.649103 C67.0574629,111.649103 67.7387572,111.838565 68.1813312,112.217259 C68.6239051,112.595953 68.8454245,113.175172 68.8454245,113.954686 C68.8454245,114.451159 68.7375704,114.864657 68.5220945,115.19587 C68.3063862,115.526621 67.9963055,115.752962 67.5918524,115.874199 C67.9581846,115.999124 68.2185222,116.19043 68.3730977,116.447656 C68.5276732,116.705112 68.6164669,117.106163 68.6394789,117.650348 L68.6736482,118.609874 L68.6736482,118.643065 C68.685038,119.128475 68.7940543,119.422579 69,119.525607 L69,119.773844 L67.0995353,119.773844 C67.0384025,119.659982 66.9916812,119.519154 66.959139,119.351819 C66.9268292,119.184483 66.906839,118.98511 66.8989359,118.753469 L66.8761564,117.898354 C66.8570959,117.394736 66.758772,117.054534 66.581417,116.877979 C66.404062,116.701655 66.0844511,116.613378 65.6225842,116.613378 L63.7848795,116.613378 L63.7848795,119.773844 L62.0503801,119.773844 L62.0503801,111.649103 L66.1376808,111.649103 Z M46.7827175,112.895588 C46.0421499,112.895588 45.4661529,113.141981 45.0537967,113.634767 C44.6419054,114.127553 44.4357273,114.822477 44.4357273,115.719771 C44.4357273,116.613378 44.6419054,117.30738 45.0537967,117.801779 C45.4661529,118.296639 46.0421499,118.543724 46.7827175,118.543724 C47.5304908,118.543724 48.1125313,118.296639 48.5286067,117.801779 C48.9444495,117.30738 49.1527196,116.613378 49.1527196,115.719771 C49.1527196,114.826165 48.9444495,114.131932 48.5286067,113.637533 C48.1125313,113.142903 47.5304908,112.895588 46.7827175,112.895588 Z M56.2913632,112.895588 C55.5507957,112.895588 54.9747987,113.141981 54.5624425,113.634767 C54.1505511,114.127553 53.944373,114.822477 53.944373,115.719771 C53.944373,116.613378 54.1505511,117.30738 54.5624425,117.801779 C54.9747987,118.296639 55.5507957,118.543724 56.2913632,118.543724 C57.0391365,118.543724 57.6211771,118.296639 58.0372524,117.801779 C58.4530953,117.30738 58.6613654,116.613378 58.6613654,115.719771 C58.6613654,114.826165 58.4530953,114.131932 58.0372524,113.637533 C57.6211771,113.142903 57.0391365,112.895588 56.2913632,112.895588 Z M37.554446,113.077583 L35.9515101,113.077583 L35.9515101,118.306689 L37.3424568,118.306689 C38.1476439,118.306689 38.7308467,118.103397 39.0913678,117.697045 C39.4521214,117.290923 39.6324981,116.631494 39.6324981,115.719679 C39.6324981,114.811552 39.4644409,114.144056 39.1285589,113.71742 C38.7929093,113.290785 38.2680501,113.077583 37.554446,113.077583 Z M10.1956814,113.276356 L9.02788119,116.734615 L11.3692927,116.734615 L10.1956814,113.276356 Z M65.9029121,113.050016 L63.7848795,113.050016 L63.7848795,115.201171 L65.8229512,115.201171 C66.2655252,115.201171 66.5907148,115.114968 66.7989849,114.941871 C67.0067901,114.769234 67.1109251,114.497027 67.1109251,114.125709 C67.1109251,113.772599 67.0098118,113.505232 66.8075853,113.323146 C66.6051263,113.141059 66.3038785,113.050016 65.9029121,113.050016 Z"
                  id="lastdoor-title"
                ></path>
              </g>
            </g>
          </svg>
        </div>
      </div>
    </>
  );
};

export default PreLoader;
